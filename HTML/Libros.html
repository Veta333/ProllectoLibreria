<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de ocio Local & Librer√≠a Carral</title>

    <!-- CSS espec√≠ficos -->
<link rel="stylesheet" href="../CSS/header.css">
<link rel="stylesheet" href="../CSS/libros.css">
<link rel="stylesheet" href="../CSS/footer.css">

</head>

<body>

    <!-- HEADER -->
    <header class="header">
         <div class="logo"><a href="Index.html">Centro de ocio Local & Librer√≠a Carral.</a></div>

        <nav class="nav-icons">
            <button><img src="img/carrito.png" alt="Carrito"></button>
            <div class="hamburger-container">
    <button class="hamburger-btn" id="menuButton">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <nav class="menu" id="menuDropdown">
        <a href="Libros.html">Libros</a>
        <a href="#">????</a>
        <a href="#">Calendario</a>
        <a href="#">Organizar</a>
        <a href="#">Libros Futuros</a>
    </nav>
</div>
</button>
            <button><img src="img/user.png" alt="Usuario"></button>
        </nav>
    </header>







<main class="catalogo">

    <!-- Buscador en tiempo real -->
    <div class="buscador">
        <input id="buscadorInput" type="text" placeholder="Buscar...">
        <button disabled>üîç</button> <!-- decorativo -->
    </div>

    <!-- Contenedor donde se generan las tarjetas -->
    <section id="gridLibros" class="grid-tarjetas"></section>

</main>

<script type="module">

    // ===== IMPORTACIONES FIREBASE =====
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "TU_API_KEY",
        authDomain: "TU_AUTH_DOMAIN",
        projectId: "TU_PROJECT_ID",
        storageBucket: "TU_STORAGE_BUCKET",
        messagingSenderId: "TU_SENDER_ID",
        appId: "TU_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let librosCache = []; // guardamos los libros en memoria para el buscador

    // ===== CARGAR LIBROS =====
    async function cargarLibros() {
        const snap = await getDocs(collection(db, "Libros"));
        librosCache = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        pintarLibros(librosCache);
    }

    // ===== PINTAR LIBROS EN EL GRID =====
    function pintarLibros(lista) {
        const grid = document.getElementById("gridLibros");
        grid.innerHTML = "";

        lista.forEach(libro => {
            const tarjeta = document.createElement("a");
            tarjeta.classList.add("tarjeta");
            tarjeta.href = `/libro.html?id=${libro.id}`;  // ‚Üê enlace de la tarjeta
            tarjeta.innerHTML = `
                <div class="imagen" style="background-image:url('${libro.imagenURL || ""}')"></div>
                <h3 class="titulo">${libro.titulo || "Sin t√≠tulo"}</h3>
            `;
            grid.appendChild(tarjeta);
        });
    }

    // ===== BUSCADOR EN TIEMPO REAL =====
    const buscador = document.getElementById("buscadorInput");

    buscador.addEventListener("input", () => {
        const texto = buscador.value.toLowerCase();

        const filtrados = librosCache.filter(libro =>
            libro.titulo?.toLowerCase().includes(texto)
        );

        pintarLibros(filtrados);
    });

    // Cargar al entrar
    cargarLibros();

</script>











































<!-- FOOTER -->
<footer class="footer">
    <div class="footer-left">
        <a href="Contacto.html">C√≥mo contactar</a>
        <a href="Privacidad.html">Privacidad</a>
    </div>

    <div class="footer-right">
        <a href="https://www.linkedin.com" target="_blank">
            <img src="img/linkedin.png" alt="LinkedIn">
        </a>
        <a href="https://www.instagram.com" target="_blank">
            <img src="img/instagram.png" alt="Instagram">
        </a>
        <a href="https://www.twitter.com" target="_blank">
            <img src="img/twitter.png" alt="Twitter">
        </a>
        <a href="https://www.facebook.com" target="_blank">
            <img src="img/facebook.png" alt="Facebook">
        </a>
    </div>
</footer>




    <script>
    const btn = document.getElementById("menuButton");
    const menu = document.getElementById("menuDropdown");

    btn.addEventListener("click", () => {
        menu.classList.toggle("show");
        btn.classList.toggle("active");
    });

    // Cerrar el men√∫ si se hace clic fuera
    document.addEventListener("click", (e) => {
        if (!btn.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.remove("show");
            btn.classList.remove("active");
        }
    });
</script>




</body>
</html>
