<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de ocio Local & Librería Carral</title>

    <link rel="icon" type="image/png" href="IMG/favicon.png" sizes="32x32">


    <link rel="stylesheet" href="CSS/header.css">
    <link rel="stylesheet" href="CSS/index.css">
    <link rel="stylesheet" href="CSS/footer.css">
</head>
<body>

<header class="header">
    <div class="logo">
        <a href="index.html">Centro de ocio Local & Librería Carral.</a>
    </div>

    <nav class="nav-icons">
        <a href="HTML/Carrito.html" class="icon-btn">
            <img src="IMG/carrito.png" alt="Carrito" class="icon-size">
        </a>

<a href="HTML/Wishlist.html" class="icon-btn" id="wishlistBtn" title="Lista de deseos">
  <img src="IMG/estrella.png" alt="Wishlist" class="icon-size">
  <span id="wishlistCount" class="header-badge">0</span>
</a>



        <div class="hamburger-container">
            <button class="hamburger-btn" id="menuButton"  aria-label="Abrir menú de navegación">
                <span></span><span></span><span></span>
            </button>

            <nav class="menu" id="menuDropdown">
                <a href="HTML/Libros.html">Libros</a>
                <a href="HTML/Calendario.html">Calendario</a>
                <a href="HTML/Organizar.html">Organizar</a>
                <a href="HTML/Librosfuturos.html">Libros Futuros</a>
            </nav>
        </div>

        <div style="position: relative;">
            <button id="userBtn">
                <img id="userIcon" src="IMG/Perfil.png" alt="Usuario">
            </button>
            <div id="userMenu" class="user-menu">
                <button id="logoutBtn">Cerrar sesión</button>
            </div>
        </div>
    </nav>
</header>

<script type="module" src="JS/Header.js"></script>

<main class="wrapper">

    <section class="content">
        <h2>Bienvenidos a nuestra Librería</h2>

        <p>
            Estamos centrados en dar una gran experiencia al usuario local
            y un servicio cómodo y eficaz a todo aquel que quiera comprar aquí.
        </p>

        <div class="img-row">
            <figure>
                <img src="IMG/taller.png" alt="Taller infantil">
                <figcaption>Imagen de uno de nuestros talleres</figcaption>
            </figure>

            <figure>
                <img src="IMG/fachada.jpg" alt="Fachada del edificio">
                <figcaption>Fachada del edificio</figcaption>
            </figure>
        </div>

        <p>
            Aquí no solo vendemos, sino que también realizamos talleres infantiles 
            organizados por los padres de la zona.
        </p>


        <!-- BOTÓN SOLO PARA ADMIN -->
<div id="adminToolsContainer" style="display:none; text-align:center; margin: 40px 0;">
    <a href="HTML/Admin.html" 
       id="adminToolsBtn"
       style="
            background:#1f60d0;
            color:white;
            padding:14px 22px;
            border-radius:10px;
            text-decoration:none;
            font-size:18px;
            font-weight:bold;
            box-shadow:0 4px 12px rgba(0,0,0,0.25);
            display:inline-block;
       ">
       Herramientas de desarrollador
    </a>
</div>
    </section>


</main>

<footer class="footer">
    <div class="footer-left">
        <a href="HTML/Contacto.html">Cómo contactar</a>
        <a href="HTML/Privacidad.html">Privacidad</a>
    </div>

    <div class="footer-right">
        <a href="#"><img src="IMG/linkedin.png"alt="Linkedin" ></a>
        <a href="#"><img src="IMG/instagram.png" alt="Instagram"></a>
        <a href="#"><img src="IMG/twitter.png"alt="Twitter"></a>
        <a href="#"><img src="IMG/facebook.png"alt="Facebook"></a>
    </div>
</footer>

<script>
    const btn = document.getElementById("menuButton");
    const menu = document.getElementById("menuDropdown");

    btn.addEventListener("click", () => {
        menu.classList.toggle("show");
        btn.classList.toggle("active");
    });

    document.addEventListener("click", (e) => {
        if (!btn.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.remove("show");
            btn.classList.remove("active");
        }
    });
</script>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import {
        getFirestore,
        doc,
        getDoc
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    import {
        getAuth,
        onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    /* FIREBASE CONFIG  */
    const firebaseConfig = {
        apiKey: "AIzaSyBDZbfcKkvUstrB_b87ujOWKNY_SJ2YoSk",
        authDomain: "prollectolibreria.firebaseapp.com",
        projectId: "prollectolibreria",
        storageBucket: "prollectolibreria.firebasestorage.app",
        messagingSenderId: "329126591666",
        appId: "1:329126591666:web:c48091699a028cacfcddab"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    const adminBox = document.getElementById("adminToolsContainer");

    // Solo mostrar el botón si el usuario es admin
    onAuthStateChanged(auth, async (user) => {
        if (!user) return;

        const ref = doc(db, "usuarios", user.uid);
        const snap = await getDoc(ref);

        if (snap.exists()) {
            const data = snap.data();

            // comprobación exacta del rol
            if (String(data.rol).trim().toLowerCase() === "admin") {
                adminBox.style.display = "block";
            }
        }
    });
</script>


</body>
</html>
